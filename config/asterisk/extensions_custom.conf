; =====================================================
; CONTEXTO PARA ENVIAR LLAMADAS AL BOT DE ELEVENLABS
; Phone Number ID: phnum_8601kbqn7whtffmsq86fx37kykff
; Agent ID: agent_7001k2qscfxzfrasmm5ynk09kge2
; Phone Number: +1 809 332 1631
; =====================================================
[to-elevenlabs-bot]
exten => s,1,NoOp(Enviando llamada al bot de ElevenLabs - CALLERID: ${CALLERID(num)})
 same => n,Answer()
 same => n,Wait(1)
 same => n,Set(DIAL_TIMEOUT=180)
 same => n,NoOp(Conectando con ElevenLabs usando Phone Number ID)
 same => n,Dial(PJSIP/+18093321631@ElevenLabs,180,tT)
 same => n,NoOp(DIALSTATUS=${DIALSTATUS} - HANGUPCAUSE=${HANGUPCAUSE})
 same => n,GotoIf($["${DIALSTATUS}" = "CHANUNAVAIL"]?unavail)
 same => n,GotoIf($["${DIALSTATUS}" = "NOANSWER"]?noanswer)
 same => n,Hangup()
 same => n(unavail),NoOp(Canal no disponible - verificar conexion con ElevenLabs)
 same => n,Hangup()
 same => n(noanswer),NoOp(ElevenLabs no contesto)
 same => n,Hangup()

; Hook para llamadas entrantes del trunk pillardhld (Altice)
[from-trunk-pjsip-pillardhld-custom]
exten => _.,1,Goto(to-elevenlabs-bot,s,1)

; Hook para llamadas entrantes del trunk ElevenLabs
; Este contexto procesa las llamadas entrantes desde ElevenLabs
[from-trunk-pjsip-ElevenLabs-custom]
exten => _.,1,NoOp(Llamada entrante desde ElevenLabs - CALLERID: ${CALLERID(num)})
 same => n,Goto(to-elevenlabs-bot,s,1)
